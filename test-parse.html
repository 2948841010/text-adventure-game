<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æµ‹è¯•è§£æé€»è¾‘</title>
</head>
<body>
    <h1>æµ‹è¯•AIè¿”å›è§£æ</h1>
    <button onclick="testParse()">æµ‹è¯•è§£æ</button>
    <pre id="output"></pre>

    <script>
        function testParse() {
            // æ¨¡æ‹ŸAIè¿”å›çš„å†…å®¹
            const testReply = `### ğŸ“ å½“å‰åœºæ™¯
ä½ é†’æ¥æ—¶å‘ç°è‡ªå·±èº«å¤„ä¸€ä¸ªé˜´æš—æ½®æ¹¿çš„åœ°ç‰¢å…¥å£ã€‚çŸ³å¢™ä¸Šå¸ƒæ»¡é’è‹”ï¼Œè¿œå¤„ä¼ æ¥ä½æ²‰çš„å’†å“®å£°ã€‚ä½ çš„æ‰‹ä¸­æ¡ç€ä¸€æŠŠç”Ÿé”ˆçš„çŸ­å‰‘ã€‚

### ğŸ’¬ è¡ŒåŠ¨é€‰é¡¹
A. å°å¿ƒç¿¼ç¿¼åœ°å‘å‰æ¢ç´¢ï¼Œå¯»æ‰¾å…‰æº
B. æ£€æŸ¥å‘¨å›´ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å¯ç”¨çš„ç‰©å“
C. å¤§å£°å‘¼å–Šï¼Œè¯•å›¾å¼•èµ·æ³¨æ„
D. åŸåœ°ä¼‘æ¯ï¼Œæ¢å¤ä½“åŠ›

### â„¹ï¸ ç©å®¶çŠ¶æ€æ›´æ–°
**Objective**: æ‰¾åˆ°åœ°ç‰¢æ·±å¤„çš„é¾™ä¹‹å®è—å¹¶æ´»ç€é€ƒå‡º
**Progress**: åˆšåˆšè‹é†’ï¼Œå¼€å§‹æ¢ç´¢ 5%
**Location**: åœ°ç‰¢å…¥å£-æ½®æ¹¿çš„çŸ³å®¤
**HP**: 100
**Inventory**: ç”Ÿé”ˆçš„çŸ­å‰‘`;

            const output = document.getElementById('output');
            let result = '=== æµ‹è¯•AIè¿”å›è§£æ ===\n\n';
            result += 'åŸå§‹å†…å®¹:\n' + testReply + '\n\n';
            result += '=== è§£æç»“æœ ===\n';

            // æµ‹è¯•Objectiveè§£æ
            const objectiveMatch = testReply.match(/\*\*Objective\*\*\s*[ï¼š:]\s*(.+?)(?=\n\*\*|\n\n|\n[A-D]\.|$)/is);
            if (objectiveMatch) {
                result += 'âœ“ Objective: ' + objectiveMatch[1].trim() + '\n';
            } else {
                result += 'âœ— Objective: æœªæ‰¾åˆ°\n';
                // å°è¯•å¤‡ç”¨åŒ¹é…
                const fallback = testReply.match(/Objective[ï¼š:]\s*(.+?)(?=\n|$)/i);
                if (fallback) {
                    result += '  å¤‡ç”¨åŒ¹é…: ' + fallback[1].trim() + '\n';
                }
            }

            // æµ‹è¯•Progressè§£æ
            const progressMatch = testReply.match(/\*\*Progress\*\*\s*[ï¼š:]\s*[^%\n]*?(\d+)\s*%/is);
            if (progressMatch) {
                result += 'âœ“ Progress: ' + progressMatch[1] + '%\n';
            } else {
                result += 'âœ— Progress: æœªæ‰¾åˆ°\n';
            }

            // æµ‹è¯•Locationè§£æ
            const locationMatch = testReply.match(/\*\*Location\*\*\s*[ï¼š:]\s*(.+?)(?=\n\*\*|\n\n|\n[A-D]\.|$)/is);
            if (locationMatch) {
                result += 'âœ“ Location: ' + locationMatch[1].trim() + '\n';
            } else {
                result += 'âœ— Location: æœªæ‰¾åˆ°\n';
            }

            // æµ‹è¯•HPè§£æ
            const hpMatch = testReply.match(/\*\*HP\*\*[ï¼š:]\s*(\d+)/i);
            if (hpMatch) {
                result += 'âœ“ HP: ' + hpMatch[1] + '\n';
            } else {
                result += 'âœ— HP: æœªæ‰¾åˆ°\n';
            }

            // æµ‹è¯•Inventoryè§£æ
            const inventoryMatch = testReply.match(/\*\*Inventory\*\*[ï¼š:]\s*(.+?)(?=\*\*|\n|$)/i);
            if (inventoryMatch) {
                result += 'âœ“ Inventory: ' + inventoryMatch[1].trim() + '\n';
            } else {
                result += 'âœ— Inventory: æœªæ‰¾åˆ°\n';
            }

            output.textContent = result;
        }
    </script>
</body>
</html>
